rows=grepl("IT", Masura))) %>%
gtExtras::gt_theme_538() %>%
gt::tab_style(style=cell_text(weight = "bold"),
locations=cells_summary()) %>%
gt::tab_style(style=cell_text(weight='bold'),
locations=cells_grand_summary())
insumari %>%
gt::gt(groupname_col = "sector") %>%
gt::fmt_number(columns=3, decimals = 2) %>%
tab_header(title="Impact tipuri de măsuri propuse (miliarde RON)",
subtitle="Calcule proprii pe bilanţurile anilor 2019-2021") %>%
summary_rows(columns=3, fns=list(`TOTAL GRUP`=~sum(., na.rm=TRUE)),
fmt = ~fmt_number(.,decimals=2)) %>%
grand_summary_rows(columns=3, fns=list(TOTAL =~ sum(., na.rm=TRUE)),
fmt=~fmt_number(., decimals=2)) %>%
gt::grand_summary_rows(columns=3, fns=list(TOTAL = ~sum(., na.rm=TRUE)),
fmt = ~fmt_number(., decimals = 2)) %>%
tab_style(style=cell_fill(color=culori[3]), locations = cells_row_groups()) %>%
tab_style(style=cell_borders(color=culori[3]), locations=cells_row_groups()) %>%
tab_style(style=cell_text(weight = "bold"), locations=cells_row_groups()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_column_labels()) %>%
tab_style(style=cell_text(color='#fff'), locations=cells_column_labels()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_stubhead()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_grand_summary()) %>%
tab_style(style=cell_fill(color=culori[3], alpha=0.5),
locations=cells_summary()) %>%
tab_style(style=cell_text(color="#fff"),
locations=cells_grand_summary()) %>%
gt::tab_options(container.width = "90%", table.layout = "auto",
table.align = "center",
table.additional_css = "table.gt_table {border: 2px solid black;}") %>%
gt::tab_footnote(footnote="10 % taxă pe tranzacţiile imobiliare",
locations=cells_body(columns=Masura,
rows=grepl("IMOBILIARE", Masura))) %>%
gt::tab_footnote(footnote="1.2 % impozit pe cifra de afaceri netă ce depăşeşte 1 miliard RON", locations = cells_body(columns=Masura, rows=grepl("ENERGIE", Masura))) %>%
gt::tab_footnote(footnote = "1.2 % impozit pe cifra de afaceri pentru toate firmele",
locations=cells_body(columns=Masura,
rows=grepl("JOCURI", Masura))) %>%
gt::tab_footnote(footnote="1.2 % impozit pe cifra de afaceri ce depăşeşte 100 de milioane RON", locations=cells_body(columns=Masura,
rows=grepl("RETAIL", Masura))) %>%
gt::tab_footnote(footnote = "Asumând cote de 16 % şi 21 % pentru ce trece de 2200 EURO lunar brut (scenariul slovac atenuat)",
locations=cells_body(columns=Masura,
rows=grepl("venit", Masura))) %>%
gt::tab_footnote(footnote="Impozit pe dividende de 18 %",
locations=cells_body(columns=Masura,
rows=grepl("dividende", Masura))) %>%
gt::tab_footnote(footnote="Scăderea pragului de venit al microîntreprinderii la 250.000 EURO",
locations=cells_body(columns=Masura, rows=grepl("prag", Masura))) %>%
gt::tab_footnote(footnote = "Mai probabilă este estimarea MF de 0.9 miliarde RON", locations=cells_body(columns=Impact,
rows=grepl("IT", Masura))) %>%
gtExtras::gt_theme_538() %>%
gt::tab_style(style=cell_text(weight = "bold"),
locations=cells_summary()) %>%
gt::tab_style(style=cell_text(weight='bold'),
locations=cells_grand_summary()) %>% gtsave("tabel_total.png")
install.packages("gt")
install.packages("gt")
library(tidyverse)
library(gt)
insumari %>%
gt::gt(groupname_col = "sector") %>%
gt::fmt_number(columns=3, decimals = 2) %>%
tab_header(title="Impact tipuri de măsuri propuse (miliarde RON)",
subtitle="Calcule proprii pe bilanţurile anilor 2019-2021") %>%
summary_rows(columns=3, fns=list(`TOTAL GRUP`=~sum(., na.rm=TRUE)),
fmt = ~fmt_number(.,decimals=2)) %>%
grand_summary_rows(columns=3, fns=list(TOTAL =~ sum(., na.rm=TRUE)),
fmt=~fmt_number(., decimals=2)) %>%
gt::grand_summary_rows(columns=3, fns=list(TOTAL = ~sum(., na.rm=TRUE)),
fmt = ~fmt_number(., decimals = 2)) %>%
tab_style(style=cell_fill(color=culori[3]), locations = cells_row_groups()) %>%
tab_style(style=cell_borders(color=culori[3]), locations=cells_row_groups()) %>%
tab_style(style=cell_text(weight = "bold"), locations=cells_row_groups()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_column_labels()) %>%
tab_style(style=cell_text(color='#fff'), locations=cells_column_labels()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_stubhead()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_grand_summary()) %>%
tab_style(style=cell_fill(color=culori[3], alpha=0.5),
locations=cells_summary()) %>%
tab_style(style=cell_text(color="#fff"),
locations=cells_grand_summary()) %>%
gt::tab_options(container.width = "90%", table.layout = "auto",
table.align = "center",
table.additional_css = "table.gt_table {border: 2px solid black;}") %>%
gt::tab_footnote(footnote="10 % taxă pe tranzacţiile imobiliare",
locations=cells_body(columns=Masura,
rows=grepl("IMOBILIARE", Masura))) %>%
gt::tab_footnote(footnote="1.2 % impozit pe cifra de afaceri netă ce depăşeşte 1 miliard RON", locations = cells_body(columns=Masura, rows=grepl("ENERGIE", Masura))) %>%
gt::tab_footnote(footnote = "1.2 % impozit pe cifra de afaceri pentru toate firmele",
locations=cells_body(columns=Masura,
rows=grepl("JOCURI", Masura))) %>%
gt::tab_footnote(footnote="1.2 % impozit pe cifra de afaceri ce depăşeşte 100 de milioane RON", locations=cells_body(columns=Masura,
rows=grepl("RETAIL", Masura))) %>%
gt::tab_footnote(footnote = "Asumând cote de 16 % şi 21 % pentru ce trece de 2200 EURO lunar brut (scenariul slovac atenuat)",
locations=cells_body(columns=Masura,
rows=grepl("venit", Masura))) %>%
gt::tab_footnote(footnote="Impozit pe dividende de 18 %",
locations=cells_body(columns=Masura,
rows=grepl("dividende", Masura))) %>%
gt::tab_footnote(footnote="Scăderea pragului de venit al microîntreprinderii la 250.000 EURO",
locations=cells_body(columns=Masura, rows=grepl("prag", Masura))) %>%
gt::tab_footnote(footnote = "Mai probabilă este estimarea MF de 0.9 miliarde RON", locations=cells_body(columns=Impact,
rows=grepl("IT", Masura))) %>%
gtExtras::gt_theme_538() %>%
gt::tab_style(style=cell_text(weight = "bold"),
locations=cells_summary()) %>%
gt::tab_style(style=cell_text(weight='bold'),
locations=cells_grand_summary()) %>% gtsave("tabel_total.png")
insumari %>%
gt::gt(groupname_col = "sector") %>%
gt::fmt_number(columns=3, decimals = 2) %>%
tab_header(title="Impact tipuri de măsuri propuse (miliarde RON)",
subtitle="Calcule proprii pe bilanţurile anilor 2019-2021") %>%
summary_rows(columns=3, fns=list(`TOTAL GRUP`=~sum(., na.rm=TRUE)),
fmt = ~fmt_number(.,decimals=2)) %>%
grand_summary_rows(columns=3, fns=list(TOTAL =~ sum(., na.rm=TRUE)),
fmt=~fmt_number(., decimals=2)) %>%
gt::grand_summary_rows(columns=3, fns=list(TOTAL = ~sum(., na.rm=TRUE)),
fmt = ~fmt_number(., decimals = 2)) %>%
tab_style(style=cell_fill(color=culori[3]), locations = cells_row_groups()) %>%
tab_style(style=cell_borders(color=culori[3]), locations=cells_row_groups()) %>%
tab_style(style=cell_text(weight = "bold"), locations=cells_row_groups()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_column_labels()) %>%
tab_style(style=cell_text(color='#fff'), locations=cells_column_labels()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_stubhead()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_grand_summary()) %>%
tab_style(style=cell_fill(color=culori[3], alpha=0.5),
locations=cells_summary()) %>%
tab_style(style=cell_text(color="#fff"),
locations=cells_grand_summary()) %>%
gt::tab_options(container.width = "90%", table.layout = "auto",
table.align = "center",
table.additional_css = "table.gt_table {border: 2px solid black;}", footnotes.padding = "5px") %>%
gt::tab_footnote(footnote="10 % taxă pe tranzacţiile imobiliare",
locations=cells_body(columns=Masura,
rows=grepl("IMOBILIARE", Masura))) %>%
gt::tab_footnote(footnote="1.2 % impozit pe cifra de afaceri netă ce depăşeşte 1 miliard RON", locations = cells_body(columns=Masura, rows=grepl("ENERGIE", Masura))) %>%
gt::tab_footnote(footnote = "1.2 % impozit pe cifra de afaceri pentru toate firmele",
locations=cells_body(columns=Masura,
rows=grepl("JOCURI", Masura))) %>%
gt::tab_footnote(footnote="1.2 % impozit pe cifra de afaceri ce depăşeşte 100 de milioane RON", locations=cells_body(columns=Masura,
rows=grepl("RETAIL", Masura))) %>%
gt::tab_footnote(footnote = "Asumând cote de 16 % şi 21 % pentru ce trece de 2200 EURO lunar brut (scenariul slovac atenuat)",
locations=cells_body(columns=Masura,
rows=grepl("venit", Masura))) %>%
gt::tab_footnote(footnote="Impozit pe dividende de 18 %",
locations=cells_body(columns=Masura,
rows=grepl("dividende", Masura))) %>%
gt::tab_footnote(footnote="Scăderea pragului de venit al microîntreprinderii la 250.000 EURO",
locations=cells_body(columns=Masura, rows=grepl("prag", Masura))) %>%
gt::tab_footnote(footnote = "Mai probabilă este estimarea MF de 0.9 miliarde RON", locations=cells_body(columns=Impact,
rows=grepl("IT", Masura))) %>%
gtExtras::gt_theme_538() %>%
gt::tab_style(style=cell_text(weight = "bold"),
locations=cells_summary()) %>%
gt::tab_style(style=cell_text(weight='bold'),
locations=cells_grand_summary())
insumari %>%
gt::gt(groupname_col = "sector") %>%
gt::fmt_number(columns=3, decimals = 2) %>%
tab_header(title="Impact tipuri de măsuri propuse (miliarde RON)",
subtitle="Calcule proprii pe bilanţurile anilor 2019-2021") %>%
summary_rows(columns=3, fns=list(`TOTAL GRUP`=~sum(., na.rm=TRUE)),
fmt = ~fmt_number(.,decimals=2)) %>%
grand_summary_rows(columns=3, fns=list(TOTAL =~ sum(., na.rm=TRUE)),
fmt=~fmt_number(., decimals=2)) %>%
gt::grand_summary_rows(columns=3, fns=list(TOTAL = ~sum(., na.rm=TRUE)),
fmt = ~fmt_number(., decimals = 2)) %>%
tab_style(style=cell_fill(color=culori[3]), locations = cells_row_groups()) %>%
tab_style(style=cell_borders(color=culori[3]), locations=cells_row_groups()) %>%
tab_style(style=cell_text(weight = "bold"), locations=cells_row_groups()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_column_labels()) %>%
tab_style(style=cell_text(color='#fff'), locations=cells_column_labels()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_stubhead()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_grand_summary()) %>%
tab_style(style=cell_fill(color=culori[3], alpha=0.5),
locations=cells_summary()) %>%
tab_style(style=cell_text(color="#fff"),
locations=cells_grand_summary()) %>%
gt::tab_options(container.width = "90%", table.layout = "auto",
table.align = "center",
table.additional_css = "table.gt_table {border: 2px solid black;}", footnotes.padding = 5) %>%
gt::tab_footnote(footnote="10 % taxă pe tranzacţiile imobiliare",
locations=cells_body(columns=Masura,
rows=grepl("IMOBILIARE", Masura))) %>%
gt::tab_footnote(footnote="1.2 % impozit pe cifra de afaceri netă ce depăşeşte 1 miliard RON", locations = cells_body(columns=Masura, rows=grepl("ENERGIE", Masura))) %>%
gt::tab_footnote(footnote = "1.2 % impozit pe cifra de afaceri pentru toate firmele",
locations=cells_body(columns=Masura,
rows=grepl("JOCURI", Masura))) %>%
gt::tab_footnote(footnote="1.2 % impozit pe cifra de afaceri ce depăşeşte 100 de milioane RON", locations=cells_body(columns=Masura,
rows=grepl("RETAIL", Masura))) %>%
gt::tab_footnote(footnote = "Asumând cote de 16 % şi 21 % pentru ce trece de 2200 EURO lunar brut (scenariul slovac atenuat)",
locations=cells_body(columns=Masura,
rows=grepl("venit", Masura))) %>%
gt::tab_footnote(footnote="Impozit pe dividende de 18 %",
locations=cells_body(columns=Masura,
rows=grepl("dividende", Masura))) %>%
gt::tab_footnote(footnote="Scăderea pragului de venit al microîntreprinderii la 250.000 EURO",
locations=cells_body(columns=Masura, rows=grepl("prag", Masura))) %>%
gt::tab_footnote(footnote = "Mai probabilă este estimarea MF de 0.9 miliarde RON", locations=cells_body(columns=Impact,
rows=grepl("IT", Masura))) %>%
gtExtras::gt_theme_538() %>%
gt::tab_style(style=cell_text(weight = "bold"),
locations=cells_summary()) %>%
gt::tab_style(style=cell_text(weight='bold'),
locations=cells_grand_summary())
insumari %>%
gt::gt(groupname_col = "sector") %>%
gt::fmt_number(columns=3, decimals = 2) %>%
tab_header(title="Impact tipuri de măsuri propuse (miliarde RON)",
subtitle="Calcule proprii pe bilanţurile anilor 2019-2021") %>%
summary_rows(columns=3, fns=list(`TOTAL GRUP`=~sum(., na.rm=TRUE)),
fmt = ~fmt_number(.,decimals=2)) %>%
grand_summary_rows(columns=3, fns=list(TOTAL =~ sum(., na.rm=TRUE)),
fmt=~fmt_number(., decimals=2)) %>%
gt::grand_summary_rows(columns=3, fns=list(TOTAL = ~sum(., na.rm=TRUE)),
fmt = ~fmt_number(., decimals = 2)) %>%
tab_style(style=cell_fill(color=culori[3]), locations = cells_row_groups()) %>%
tab_style(style=cell_borders(color=culori[3]), locations=cells_row_groups()) %>%
tab_style(style=cell_text(weight = "bold"), locations=cells_row_groups()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_column_labels()) %>%
tab_style(style=cell_text(color='#fff'), locations=cells_column_labels()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_stubhead()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_grand_summary()) %>%
tab_style(style=cell_fill(color=culori[3], alpha=0.5),
locations=cells_summary()) %>%
tab_style(style=cell_text(color="#fff"),
locations=cells_grand_summary()) %>%
gt::tab_options(container.width = "90%", table.layout = "auto",
table.align = "center",
table.additional_css = "table.gt_table {border: 2px solid black;}", footnotes.padding = 1) %>%
gt::tab_footnote(footnote="10 % taxă pe tranzacţiile imobiliare",
locations=cells_body(columns=Masura,
rows=grepl("IMOBILIARE", Masura))) %>%
gt::tab_footnote(footnote="1.2 % impozit pe cifra de afaceri netă ce depăşeşte 1 miliard RON", locations = cells_body(columns=Masura, rows=grepl("ENERGIE", Masura))) %>%
gt::tab_footnote(footnote = "1.2 % impozit pe cifra de afaceri pentru toate firmele",
locations=cells_body(columns=Masura,
rows=grepl("JOCURI", Masura))) %>%
gt::tab_footnote(footnote="1.2 % impozit pe cifra de afaceri ce depăşeşte 100 de milioane RON", locations=cells_body(columns=Masura,
rows=grepl("RETAIL", Masura))) %>%
gt::tab_footnote(footnote = "Asumând cote de 16 % şi 21 % pentru ce trece de 2200 EURO lunar brut (scenariul slovac atenuat)",
locations=cells_body(columns=Masura,
rows=grepl("venit", Masura))) %>%
gt::tab_footnote(footnote="Impozit pe dividende de 18 %",
locations=cells_body(columns=Masura,
rows=grepl("dividende", Masura))) %>%
gt::tab_footnote(footnote="Scăderea pragului de venit al microîntreprinderii la 250.000 EURO",
locations=cells_body(columns=Masura, rows=grepl("prag", Masura))) %>%
gt::tab_footnote(footnote = "Mai probabilă este estimarea MF de 0.9 miliarde RON", locations=cells_body(columns=Impact,
rows=grepl("IT", Masura))) %>%
gtExtras::gt_theme_538() %>%
gt::tab_style(style=cell_text(weight = "bold"),
locations=cells_summary()) %>%
gt::tab_style(style=cell_text(weight='bold'),
locations=cells_grand_summary())
tabel_total <- insumari %>%
gt::gt(groupname_col = "sector") %>%
gt::fmt_number(columns=3, decimals = 2) %>%
tab_header(title="Impact tipuri de măsuri propuse (miliarde RON)",
subtitle="Calcule proprii pe bilanţurile anilor 2019-2021") %>%
summary_rows(columns=3, fns=list(`TOTAL GRUP`=~sum(., na.rm=TRUE)),
fmt = ~fmt_number(.,decimals=2)) %>%
grand_summary_rows(columns=3, fns=list(TOTAL =~ sum(., na.rm=TRUE)),
fmt=~fmt_number(., decimals=2)) %>%
gt::grand_summary_rows(columns=3, fns=list(TOTAL = ~sum(., na.rm=TRUE)),
fmt = ~fmt_number(., decimals = 2)) %>%
tab_style(style=cell_fill(color=culori[3]), locations = cells_row_groups()) %>%
tab_style(style=cell_borders(color=culori[3]), locations=cells_row_groups()) %>%
tab_style(style=cell_text(weight = "bold"), locations=cells_row_groups()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_column_labels()) %>%
tab_style(style=cell_text(color='#fff'), locations=cells_column_labels()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_stubhead()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_grand_summary()) %>%
tab_style(style=cell_fill(color=culori[3], alpha=0.5),
locations=cells_summary()) %>%
tab_style(style=cell_text(color="#fff"),
locations=cells_grand_summary()) %>%
gt::tab_options(container.width = "90%", table.layout = "auto",
table.align = "center",
table.additional_css = "table.gt_table {border: 2px solid black;}", footnotes.padding = 1) %>%
gt::tab_footnote(footnote="10 % taxă pe tranzacţiile imobiliare",
locations=cells_body(columns=Masura,
rows=grepl("IMOBILIARE", Masura))) %>%
gt::tab_footnote(footnote="1.2 % impozit pe cifra de afaceri netă ce depăşeşte 1 miliard RON", locations = cells_body(columns=Masura, rows=grepl("ENERGIE", Masura))) %>%
gt::tab_footnote(footnote = "1.2 % impozit pe cifra de afaceri pentru toate firmele",
locations=cells_body(columns=Masura,
rows=grepl("JOCURI", Masura))) %>%
gt::tab_footnote(footnote="1.2 % impozit pe cifra de afaceri ce depăşeşte 100 de milioane RON", locations=cells_body(columns=Masura,
rows=grepl("RETAIL", Masura))) %>%
gt::tab_footnote(footnote = "Asumând cote de 16 % şi 21 % pentru ce trece de 2200 EURO lunar brut (scenariul slovac atenuat)",
locations=cells_body(columns=Masura,
rows=grepl("venit", Masura))) %>%
gt::tab_footnote(footnote="Impozit pe dividende de 18 %",
locations=cells_body(columns=Masura,
rows=grepl("dividende", Masura))) %>%
gt::tab_footnote(footnote="Scăderea pragului de venit al microîntreprinderii la 250.000 EURO",
locations=cells_body(columns=Masura, rows=grepl("prag", Masura))) %>%
gt::tab_footnote(footnote = "Mai probabilă este estimarea MF de 0.9 miliarde RON", locations=cells_body(columns=Impact,
rows=grepl("IT", Masura))) %>%
gtExtras::gt_theme_538() %>%
gt::tab_style(style=cell_text(weight = "bold"),
locations=cells_summary()) %>%
gt::tab_style(style=cell_text(weight='bold'),
locations=cells_grand_summary())
png("tabel_total_exp.png", width=1000, height = 2000, dpi=250)
png("tabel_total_exp.png", width=1000, height = 2000, res=250)
total_total
png("tabel_total_exp.png", width=1000, height = 2000, res=250)
tabel_total
dev.off()
tabel_total
png("tabel_total_exp.png", width=1000, height = 2000, res=250)
print(tabel_total)
dev.off()
png("/home/petre/tabel_total_exp.png", width=1000, height = 2000, res=250)
print(tabel_total)
dev.off()
png("tabel_total_exp.png", width=1000, height = 2000, res=250)
show(tabel_total)
dev.off()
gtsave(tabel_total, "tabel_total_exp.png")
gtExtras::gtsave_extra(tabel_total, "tabel_total_exp.png")
gtExtras::gtsave_extra(tabel_total, "tabel_total_exp.png")
gtExtras::gtsave_extra(tabel_total, "tabel_total_exp.png")
gtExtras::gtsave_extra(tabel_total, "tabel_total_exp.png")
insumari <- read_csv(here::here("database",
"taxe_sectoriale_scutiri.csv")) %>%
mutate(sector=str_to_upper(sector)) %>%
group_by(sector) %>% summarise(valoare=sum(valoare)) %>%
rename(Masura = sector, Impact=valoare) %>%
bind_rows(tibble("Masura"=c("Impozit progresiv pe venit",
"Impozit pe dividende",
"TRANZACŢII IMOBILIARE",
"Coborâre prag microîntreprinderi"),
"Impact"=c(8, 6, 0.35, 2.5))) %>%
mutate(sector = c("Eliminare scutiri", "Eliminare scutiri", "Taxe sectoriale", "Eliminare scutiri", "Taxe sectoriale", "Taxe sectoriale", "Creştere impozite", "Creştere impozite", "Taxe sectoriale", "Creştere impozite")) %>%
relocate(sector)
tabel_total <- insumari %>%
gt::gt(groupname_col = "sector") %>%
gt::fmt_number(columns=3, decimals = 2) %>%
tab_header(title="Impact tipuri de măsuri propuse (miliarde RON)",
subtitle="Calcule proprii pe bilanţurile anilor 2019-2021") %>%
summary_rows(columns=3, fns=list(`TOTAL GRUP`=~sum(., na.rm=TRUE)),
fmt = ~fmt_number(.,decimals=2)) %>%
grand_summary_rows(columns=3, fns=list(TOTAL =~ sum(., na.rm=TRUE)),
fmt=~fmt_number(., decimals=2)) %>%
gt::grand_summary_rows(columns=3, fns=list(TOTAL = ~sum(., na.rm=TRUE)),
fmt = ~fmt_number(., decimals = 2)) %>%
tab_style(style=cell_fill(color=culori[3]), locations = cells_row_groups()) %>%
tab_style(style=cell_borders(color=culori[3]), locations=cells_row_groups()) %>%
tab_style(style=cell_text(weight = "bold"), locations=cells_row_groups()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_column_labels()) %>%
tab_style(style=cell_text(color='#fff'), locations=cells_column_labels()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_stubhead()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_grand_summary()) %>%
tab_style(style=cell_fill(color=culori[3], alpha=0.5),
locations=cells_summary()) %>%
tab_style(style=cell_text(color="#fff"),
locations=cells_grand_summary()) %>%
gt::tab_options(container.width = "90%", table.layout = "auto",
table.align = "center",
table.additional_css = "table.gt_table {border: 2px solid black;}", footnotes.padding = 1) %>%
gt::tab_footnote(footnote="10 % taxă pe tranzacţiile imobiliare",
locations=cells_body(columns=Masura,
rows=grepl("IMOBILIARE", Masura))) %>%
gt::tab_footnote(footnote="1.2 % impozit pe cifra de afaceri netă ce depăşeşte 1 miliard RON", locations = cells_body(columns=Masura, rows=grepl("ENERGIE", Masura))) %>%
gt::tab_footnote(footnote = "1.2 % impozit pe cifra de afaceri pentru toate firmele",
locations=cells_body(columns=Masura,
rows=grepl("JOCURI", Masura))) %>%
gt::tab_footnote(footnote="1.2 % impozit pe cifra de afaceri ce depăşeşte 100 de milioane RON", locations=cells_body(columns=Masura,
rows=grepl("RETAIL", Masura))) %>%
gt::tab_footnote(footnote = "Asumând cote de 10 % şi 16 % pentru ce trece de 2200 EURO lunar brut",
locations=cells_body(columns=Masura,
rows=grepl("venit", Masura))) %>%
gt::tab_footnote(footnote="Impozit pe dividende de 18 %",
locations=cells_body(columns=Masura,
rows=grepl("dividende", Masura))) %>%
gt::tab_footnote(footnote="Scăderea pragului de venit al microîntreprinderii la 250.000 EURO",
locations=cells_body(columns=Masura, rows=grepl("prag", Masura))) %>%
gt::tab_footnote(footnote = "Mai probabilă este estimarea MF de 0.9 miliarde RON", locations=cells_body(columns=Impact,
rows=grepl("IT", Masura))) %>%
gtExtras::gt_theme_538() %>%
gt::tab_style(style=cell_text(weight = "bold"),
locations=cells_summary()) %>%
gt::tab_style(style=cell_text(weight='bold'),
locations=cells_grand_summary())
tabel_total
gtsave(tabel_total, "tabel_total_scenariu_I.png")
insumari <- read_csv(here::here("database",
"taxe_sectoriale_scutiri.csv")) %>%
mutate(sector=str_to_upper(sector)) %>%
group_by(sector) %>% summarise(valoare=sum(valoare)) %>%
rename(Masura = sector, Impact=valoare) %>%
bind_rows(tibble("Masura"=c("Impozit progresiv pe venit",
"Impozit pe dividende",
"TRANZACŢII IMOBILIARE",
"Coborâre prag microîntreprinderi"),
"Impact"=c(10, 6, 0.35, 2.5))) %>%
mutate(sector = c("Eliminare scutiri", "Eliminare scutiri", "Taxe sectoriale", "Eliminare scutiri", "Taxe sectoriale", "Taxe sectoriale", "Creştere impozite", "Creştere impozite", "Taxe sectoriale", "Creştere impozite")) %>%
relocate(sector)
tabel_total <- insumari %>%
gt::gt(groupname_col = "sector") %>%
gt::fmt_number(columns=3, decimals = 2) %>%
tab_header(title="Impact tipuri de măsuri propuse (miliarde RON)",
subtitle="Calcule proprii pe bilanţurile anilor 2019-2021") %>%
summary_rows(columns=3, fns=list(`TOTAL GRUP`=~sum(., na.rm=TRUE)),
fmt = ~fmt_number(.,decimals=2)) %>%
grand_summary_rows(columns=3, fns=list(TOTAL =~ sum(., na.rm=TRUE)),
fmt=~fmt_number(., decimals=2)) %>%
gt::grand_summary_rows(columns=3, fns=list(TOTAL = ~sum(., na.rm=TRUE)),
fmt = ~fmt_number(., decimals = 2)) %>%
tab_style(style=cell_fill(color=culori[3]), locations = cells_row_groups()) %>%
tab_style(style=cell_borders(color=culori[3]), locations=cells_row_groups()) %>%
tab_style(style=cell_text(weight = "bold"), locations=cells_row_groups()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_column_labels()) %>%
tab_style(style=cell_text(color='#fff'), locations=cells_column_labels()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_stubhead()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_grand_summary()) %>%
tab_style(style=cell_fill(color=culori[3], alpha=0.5),
locations=cells_summary()) %>%
tab_style(style=cell_text(color="#fff"),
locations=cells_grand_summary()) %>%
gt::tab_options(container.width = "90%", table.layout = "auto",
table.align = "center",
table.additional_css = "table.gt_table {border: 2px solid black;}", footnotes.padding = 1) %>%
gt::tab_footnote(footnote="10 % taxă pe tranzacţiile imobiliare",
locations=cells_body(columns=Masura,
rows=grepl("IMOBILIARE", Masura))) %>%
gt::tab_footnote(footnote="1.2 % impozit pe cifra de afaceri netă ce depăşeşte 1 miliard RON", locations = cells_body(columns=Masura, rows=grepl("ENERGIE", Masura))) %>%
gt::tab_footnote(footnote = "1.2 % impozit pe cifra de afaceri pentru toate firmele",
locations=cells_body(columns=Masura,
rows=grepl("JOCURI", Masura))) %>%
gt::tab_footnote(footnote="1.2 % impozit pe cifra de afaceri ce depăşeşte 100 de milioane RON", locations=cells_body(columns=Masura,
rows=grepl("RETAIL", Masura))) %>%
gt::tab_footnote(footnote = "Asumând cote de 10 % şi 19 % pentru ce trece de 2200 EURO lunar brut",
locations=cells_body(columns=Masura,
rows=grepl("venit", Masura))) %>%
gt::tab_footnote(footnote="Impozit pe dividende de 18 %",
locations=cells_body(columns=Masura,
rows=grepl("dividende", Masura))) %>%
gt::tab_footnote(footnote="Scăderea pragului de venit al microîntreprinderii la 250.000 EURO",
locations=cells_body(columns=Masura, rows=grepl("prag", Masura))) %>%
gt::tab_footnote(footnote = "Mai probabilă este estimarea MF de 0.9 miliarde RON", locations=cells_body(columns=Impact,
rows=grepl("IT", Masura))) %>%
gtExtras::gt_theme_538() %>%
gt::tab_style(style=cell_text(weight = "bold"),
locations=cells_summary()) %>%
gt::tab_style(style=cell_text(weight='bold'),
locations=cells_grand_summary())
tabel_total
insumari <- read_csv(here::here("database",
"taxe_sectoriale_scutiri.csv")) %>%
mutate(sector=str_to_upper(sector)) %>%
group_by(sector) %>% summarise(valoare=sum(valoare)) %>%
rename(Masura = sector, Impact=valoare) %>%
bind_rows(tibble("Masura"=c("Impozit progresiv pe venit",
"Impozit pe dividende",
"TRANZACŢII IMOBILIARE",
"Coborâre prag microîntreprinderi"),
"Impact"=c(30, 6, 0.35, 2.5))) %>%
mutate(sector = c("Eliminare scutiri", "Eliminare scutiri", "Taxe sectoriale", "Eliminare scutiri", "Taxe sectoriale", "Taxe sectoriale", "Creştere impozite", "Creştere impozite", "Taxe sectoriale", "Creştere impozite")) %>%
relocate(sector)
tabel_total <- insumari %>%
gt::gt(groupname_col = "sector") %>%
gt::fmt_number(columns=3, decimals = 2) %>%
tab_header(title="Impact tipuri de măsuri propuse (miliarde RON)",
subtitle="Calcule proprii pe bilanţurile anilor 2019-2021") %>%
summary_rows(columns=3, fns=list(`TOTAL GRUP`=~sum(., na.rm=TRUE)),
fmt = ~fmt_number(.,decimals=2)) %>%
grand_summary_rows(columns=3, fns=list(TOTAL =~ sum(., na.rm=TRUE)),
fmt=~fmt_number(., decimals=2)) %>%
gt::grand_summary_rows(columns=3, fns=list(TOTAL = ~sum(., na.rm=TRUE)),
fmt = ~fmt_number(., decimals = 2)) %>%
tab_style(style=cell_fill(color=culori[3]), locations = cells_row_groups()) %>%
tab_style(style=cell_borders(color=culori[3]), locations=cells_row_groups()) %>%
tab_style(style=cell_text(weight = "bold"), locations=cells_row_groups()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_column_labels()) %>%
tab_style(style=cell_text(color='#fff'), locations=cells_column_labels()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_stubhead()) %>%
tab_style(style=cell_fill(color=culori[5]), locations=cells_grand_summary()) %>%
tab_style(style=cell_fill(color=culori[3], alpha=0.5),
locations=cells_summary()) %>%
tab_style(style=cell_text(color="#fff"),
locations=cells_grand_summary()) %>%
gt::tab_options(container.width = "90%", table.layout = "auto",
table.align = "center",
table.additional_css = "table.gt_table {border: 2px solid black;}", footnotes.padding = 1) %>%
gt::tab_footnote(footnote="10 % taxă pe tranzacţiile imobiliare",
locations=cells_body(columns=Masura,
rows=grepl("IMOBILIARE", Masura))) %>%
gt::tab_footnote(footnote="1.2 % impozit pe cifra de afaceri netă ce depăşeşte 1 miliard RON", locations = cells_body(columns=Masura, rows=grepl("ENERGIE", Masura))) %>%
gt::tab_footnote(footnote = "1.2 % impozit pe cifra de afaceri pentru toate firmele",
locations=cells_body(columns=Masura,
rows=grepl("JOCURI", Masura))) %>%
gt::tab_footnote(footnote="1.2 % impozit pe cifra de afaceri ce depăşeşte 100 de milioane RON", locations=cells_body(columns=Masura,
rows=grepl("RETAIL", Masura))) %>%
gt::tab_footnote(footnote = "Asumând cote de 19 % şi 25 % pentru ce trece de 2200 EURO lunar brut (scenariul slovac)",
locations=cells_body(columns=Masura,
rows=grepl("venit", Masura))) %>%
gt::tab_footnote(footnote="Impozit pe dividende de 18 %",
locations=cells_body(columns=Masura,
rows=grepl("dividende", Masura))) %>%
gt::tab_footnote(footnote="Scăderea pragului de venit al microîntreprinderii la 250.000 EURO",
locations=cells_body(columns=Masura, rows=grepl("prag", Masura))) %>%
gt::tab_footnote(footnote = "Mai probabilă este estimarea MF de 0.9 miliarde RON", locations=cells_body(columns=Impact,
rows=grepl("IT", Masura))) %>%
gtExtras::gt_theme_538() %>%
gt::tab_style(style=cell_text(weight = "bold"),
locations=cells_summary()) %>%
gt::tab_style(style=cell_text(weight='bold'),
locations=cells_grand_summary())
tabel_total
